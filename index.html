<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Doughlicious Pizza</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #faf8f6;
      --card:#fff;
      --accent:#b71c1c; /* deep red */
      --muted:#6b6b6b;
      --shadow: 0 6px 22px rgba(15,15,15,0.06);
      --radius:16px;
    }
    *{box-sizing:border-box;font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}
    body{
      margin:0;
      min-height:100vh;
      background: linear-gradient(180deg,var(--bg),#f3efee 70%);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      color:#333;
    }

    .container{
      width:100%;
      max-width:980px;
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:24px;
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:20px;
    }

    @media (max-width:900px){
      .container{grid-template-columns:1fr; padding:18px;}
    }

    header{
      grid-column: 1 / -1;
      display:flex;
      align-items:center;
      gap:14px;
      margin-bottom:6px;
    }
    .logo{
      font-size:36px;
      border-radius:10px;
      padding:8px 10px;
      background:linear-gradient(135deg, rgba(183,28,28,0.08), rgba(183,28,28,0.03));
    }
    header h1{margin:0;font-weight:600;font-size:20px;color:var(--accent);}
    header p{margin:0;font-size:13px;color:var(--muted);}

    /* Left column: menu */
    .menu{
      padding:12px;
      border-radius:10px;
      background:linear-gradient(180deg,#fff,#fff);
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .menu-card{
      display:flex;
      gap:12px;
      align-items:center;
      padding:10px;
      border-radius:10px;
      border:1px solid rgba(0,0,0,0.04);
    }
    .menu-card img{
      width:120px;
      height:80px;
      object-fit:cover;
      border-radius:8px;
      flex-shrink:0;
      background:#f2f2f2;
    }
    .menu-info{flex:1;}
    .menu-info h3{margin:0;font-size:16px;}
    .price{font-weight:600;color:var(--accent);margin-top:6px;}
    .inputrow{display:flex;align-items:center;gap:10px;margin-top:8px;}
    .toppings{padding-left:12px; display:grid; grid-template-columns:repeat(2,1fr); gap:6px; font-size:14px;}
    .small{font-size:13px;color:var(--muted);}

    /* right column: cart */
    .cart{
      padding:12px;
      border-radius:10px;
      background:linear-gradient(180deg,#fff,#fff);
      display:flex;
      flex-direction:column;
      gap:12px;
      height:fit-content;
      position:sticky;
      top:20px;
    }
    .cart h2{margin:0;font-size:18px;color:#222;}
    .cart-list{display:flex;flex-direction:column;gap:10px; max-height:360px; overflow:auto; padding-right:4px;}
    .cart-item{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:8px;
      border-radius:8px;
      background:#fbfbfb;
      border:1px solid rgba(0,0,0,0.03);
    }
    .cart-item .left{display:flex;gap:10px;align-items:center;}
    .cart-item img{width:56px;height:40px;object-fit:cover;border-radius:6px;}
    .cart-item .meta{font-size:13px;}
    .qty-controls{display:flex;gap:6px;align-items:center;}
    .btn{border:0;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600;font-family:'Poppins',sans-serif;}
    .btn-outline{background:transparent;border:1px solid rgba(0,0,0,0.08);}
    .btn-danger{background:#ff4d4d;color:#fff;}
    .btn-primary{background:var(--accent);color:#fff;}
    .total-row{display:flex;justify-content:space-between;align-items:center;padding-top:6px;border-top:1px dashed rgba(0,0,0,0.06);}

    /* UPI QR card */
    .pay-area{text-align:center;padding:10px;border-radius:10px;background:linear-gradient(180deg,#fff,#fff);border:1px solid rgba(0,0,0,0.03);}
    .qr{display:inline-block;padding:10px;border-radius:8px;background:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.04);}
    .muted{color:var(--muted);font-size:13px;}
    footer{grid-column:1/-1;text-align:center;padding-top:10px;font-size:13px;color:var(--muted);}

    /* small helpers */
    .gap{height:8px;}
    .hidden{display:none !important}
    .note{font-size:12px;color:var(--muted)}
    .pill{background:rgba(0,0,0,0.03);padding:6px 8px;border-radius:999px;font-size:12px}
  </style>
</head>
<body>
  <div class="container" role="application" aria-labelledby="pageTitle">
    <header>
      <div class="logo" aria-hidden="true">üçï</div>
      <div>
        <h1 id="pageTitle">Doughlicious Pizza <span style="font-weight:300;font-size:13px;color:var(--muted)"> ‚Äî Home made base</span></h1>
        <p class="small">Warm, fresh & minimal ‚Äî Order now!</p>
      </div>
    </header>

    <section class="menu" aria-label="Menu selection">
      <div>
        <h2 style="margin:0 0 8px 0;font-size:18px">Choose your pizza</h2>
        <div class="menu-card" title="Margherita">
          <input type="radio" id="pizza-margherita" name="pizza" value="margherita" data-price="160" style="width:18px;height:18px" />
          <img src="photo1.jpg" alt="Margherita pizza" />
          <div class="menu-info">
            <h3>Margherita</h3>
            <div class="price">‚Çπ160</div>
            <div class="inputrow small">Classic cheese & tomato ‚Äî no extra toppings.</div>
          </div>
        </div>

        <div class="menu-card" title="Pizza with Toppings">
          <input type="radio" id="pizza-toppings" name="pizza" value="withToppings" data-price="180" style="width:18px;height:18px" />
          <img src="photo2.jpg" alt="Pizza with toppings" />
          <div class="menu-info">
            <h3>Pizza with Toppings</h3>
            <div class="price">‚Çπ180</div>
            <div class="inputrow small">Choose toppings from the list below.</div>

            <div id="toppingBlock" style="margin-top:8px">
              <div class="toppings" aria-label="Toppings">
                <label><input type="checkbox" value="Onion" class="topping"> Onion</label>
                <label><input type="checkbox" value="Tomato" class="topping"> Tomato</label>
                <label><input type="checkbox" value="Paneer" class="topping"> Paneer</label>
                <label><input type="checkbox" value="Capsicum" class="topping"> Capsicum</label>
                <label><input type="checkbox" value="Corn" class="topping"> Corn</label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="gap"></div>
      <div class="note">Tip: selecting a pizza will automatically add it to the cart. Use the cart to change quantity or remove items.</div>
    </section>

    <aside class="cart" aria-label="Cart and payment">
      <div>
        <h2>Order Summary</h2>
        <div class="cart-list" id="cartList" aria-live="polite">
          </div>

        <div class="total-row" style="margin-top:8px">
          <div class="muted">Total</div>
          <div style="font-size:18px;font-weight:700" id="totalPrice">‚Çπ0</div>
        </div>

        <div style="display:flex;gap:10px;margin-top:12px;align-items:center">
          <button id="whatsappBtn" class="btn btn-primary" style="flex:1">Order on WhatsApp</button>
          <button id="clearCart" class="btn btn-outline" title="Clear cart">Clear</button>
        </div>
      </div>

      <div class="pay-area">
        <h3 style="margin:0 0 8px 0;font-size:16px">Pay Here</h3>
        <div id="qrWrap" class="qr hidden" aria-hidden="true">
          <img id="upiQr" src="" alt="UPI QR code" style="display:block;width:190px;height:190px;object-fit:contain" />
          <div class="muted" style="margin-top:8px;font-size:13px">Scan to pay exact amount</div>
        </div>
        <div id="noQrNote" class="muted" style="margin-top:6px">QR code will appear when your cart total > ‚Çπ0.</div>
      </div>

      <div style="text-align:center;font-size:12px;color:var(--muted);margin-top:6px">
        UPI ID: <span class="pill">bhardwajtanu1989@okhdfcbank</span>
      </div>
    </aside>

    <footer>
      <div>Contact: <strong>+91 9910563777</strong> &nbsp; | &nbsp; Pick from: <strong>PC 406</strong></div>
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      /* ====== Data & state ====== */
      const pizzaData = {
        margherita: { id:'margherita', name:'Margherita', price:160, image:'photo1.jpg' },
        withToppings: { id:'withToppings', name:'Pizza with Toppings', price:180, image:'photo2.jpg' }
      };
      const upiId = 'bhardwajtanu1989@okhdfcbank';
      const waPhone = '919910563777';
      let cart = []; // {id, name, toppings:[], qty, price, image}

      /* ====== Helpers ====== */
      const formatINR = (n) => '‚Çπ' + Number(n).toLocaleString('en-IN');
      const el = (sel) => document.querySelector(sel);
      const els = (sel) => Array.from(document.querySelectorAll(sel));

      /* ====== Main render function ====== */
      function render() {
        renderCart();
        updateTotalAndQR();
      }

      /* ====== Cart rendering ====== */
      function renderCart() {
        const cartList = el('#cartList');
        cartList.innerHTML = '';
        if (cart.length === 0) {
          cartList.innerHTML = '<div class="muted" style="text-align:center;padding:10px;">Cart is empty.</div>';
        } else {
          cart.forEach((item, idx) => {
            const toppingsHTML = item.toppings && item.toppings.length ? `Toppings: ${item.toppings.join(', ')}` : 'No extra toppings';
            const itemEl = document.createElement('div');
            itemEl.className = 'cart-item';
            itemEl.innerHTML = `
              <div class="left">
                <img src="${item.image}" alt="${item.name}">
                <div class="meta">
                  <div style="font-weight:600">${item.name}</div>
                  <div class="small">${toppingsHTML}</div>
                  <div class="small" style="margin-top:4px">Price: ${formatINR(item.price)}</div>
                </div>
              </div>
              <div style="display:flex;align-items:center;gap:8px">
                <div class="qty-controls">
                  <button class="btn btn-outline" data-action="dec" data-idx="${idx}">‚àí</button>
                  <div style="min-width:26px;text-align:center">${item.qty}</div>
                  <button class="btn btn-outline" data-action="inc" data-idx="${idx}">+</button>
                </div>
              </div>
            `;
            cartList.appendChild(itemEl);
          });
        }
      }

      /* ====== Total & UPI QR generation ====== */
      function updateTotalAndQR(){
        const total = cart.reduce((s,it)=> s + (it.price * it.qty), 0);
        el('#totalPrice').textContent = formatINR(total);

        if (total > 0){
          const upiUri = `upi://pay?pa=${encodeURIComponent(upiId)}&pn=${encodeURIComponent('Doughlicious Pizza')}&am=${total.toFixed(2)}&cu=INR&tn=PizzaOrder`;
          const qrUrl = 'https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=' + encodeURIComponent(upiUri);
          el('#upiQr').src = qrUrl;
          el('#qrWrap').classList.remove('hidden');
          el('#noQrNote').classList.add('hidden');
        } else {
          el('#upiQr').src = '';
          el('#qrWrap').classList.add('hidden');
          el('#noQrNote').classList.remove('hidden');
        }
      }

      /* ====== Event Handlers ====== */
      function handlePizzaSelection(event) {
        const value = event.target.value;
        const data = pizzaData[value];
        if (!data) return;

        let toppings = (value === 'withToppings') ? els('.topping:checked').map(cb => cb.value) : [];

        const existingIndex = cart.findIndex(ci => ci.id === data.id && JSON.stringify(ci.toppings || []) === JSON.stringify(toppings));

        if (existingIndex > -1) {
          cart[existingIndex].qty += 1;
        } else {
          cart.push({ ...data, qty: 1, toppings });
        }
        render();
      }

      function handleCartActions(event) {
        const target = event.target;
        const action = target.dataset.action;
        const idx = parseInt(target.dataset.idx);

        if (action === 'inc') cart[idx].qty++;
        if (action === 'dec') {
          if (cart[idx].qty > 1) cart[idx].qty--;
          else if (confirm('Remove this item from cart?')) cart.splice(idx, 1);
        }
        render();
      }
      
      function handleToppingsChange() {
        const selectedRadio = el('input[name="pizza"]:checked');
        if (!selectedRadio || selectedRadio.value !== 'withToppings') return;

        const toppings = els('.topping:checked').map(c => c.value);
        const lastToppingsPizza = cart.slice().reverse().find(item => item.id === 'withToppings');
        
        if (lastToppingsPizza) {
          lastToppingsPizza.toppings = toppings;
          render();
        }
      }

      function handleWhatsAppOrder() {
        if (cart.length === 0) return alert('Your cart is empty.');
        
        let lines = ['Hi! I want to order:'];
        cart.forEach(it => {
          const t = it.toppings && it.toppings.length ? ` (Toppings: ${it.toppings.join(', ')})` : '';
          lines.push(`- ${it.qty} x ${it.name}${t} ‚Äî ${formatINR(it.price * it.qty)}`);
        });
        const total = cart.reduce((s,it)=> s + it.price * it.qty, 0);
        lines.push(`\nTotal: *${formatINR(total)}*`);
        
        if (!confirm(lines.join('\n') + '\n\nOpen WhatsApp to place the order?')) return;
        
        const url = `https://wa.me/${waPhone}?text=` + encodeURIComponent(lines.join('\n'));
        window.open(url,'_blank');
      }

      function handleClearCart() {
        if (cart.length > 0 && confirm('Clear entire cart?')) {
          cart = [];
          els('input[name="pizza"]:checked').forEach(r => r.checked = false);
          els('.topping:checked').forEach(c => c.checked = false);
          toggleToppings(false);
          render();
        }
      }

      function toggleToppings(enabled) {
        els('.topping').forEach(cb => { 
          cb.disabled = !enabled;
          cb.parentElement.style.opacity = enabled ? 1 : 0.6;
        });
      }

      /* ====== Attach Listeners ====== */
      els('input[name="pizza"]').forEach(r => r.addEventListener('change', (e) => {
        handlePizzaSelection(e);
        toggleToppings(e.target.value === 'withToppings' && e.target.checked);
      }));
      els('.topping').forEach(cb => cb.addEventListener('change', handleToppingsChange));
      el('#cartList').addEventListener('click', handleCartActions);
      el('#whatsappBtn').addEventListener('click', handleWhatsAppOrder);
      el('#clearCart').addEventListener('click', handleClearCart);

      /* ====== Initialize ====== */
      toggleToppings(false);
      try {
        const savedCart = JSON.parse(localStorage.getItem('doughlicious_cart'));
        if (Array.isArray(savedCart)) cart = savedCart;
      } catch (e) { /* ignore parsing errors */ }
      
      window.addEventListener('beforeunload', () => localStorage.setItem('doughlicious_cart', JSON.stringify(cart)));

      render();
    });
  </script>
</body>
</html>
